#{extends 'main.html' /}
#{set title:'タスク管理システム｜プロジェクト編集画面' /}

<div id="user_remove_modal" class="modal fade" >
    <div class="modal-dialog" style="margin-top:8%">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title">本当に削除しますか？</h4>
            </div>
            <div class="modal-footer">
                #{list items:userList, as:'user'}
                <form action='/Admin/userDelete?project_name=${project.project_name}&user_id=${user.user_id}' method='POST'>
                    #{/list}
                    <input type="submit" class="btn btn-default" value="はい">
                    <input type="button" class="btn btn-default" data-dismiss="modal" value="いいえ">
                </form>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<a href="/Admin/adminScreen"><button type="button">◀top画面に戻る</button></a>

<h1>プロジェクト編集</h1>
<table>
    <thead>
        <tr>
            <th>参加中の利用者</th>
            <!-- 空の見出し この列に削除ボタンを配置する -->
            <th></th>
        </tr>

    </thead>
    <tbody>
        #{list items:userList, as:'user'}
        <tr>
            <td>${user.user_id}</td>
            <td>
                <button type="button" class="user_remove btn btn-default">削除</button>
            </td>
        </tr>
        #{/list}
    </tbody>
</table>

<!--
      </tr>
  </thead>
  <tbody>
      #{list items:プロジェクト一覧, as:'project'}
      <tr>
          <td>${project.id}</td>
          <td>${project.project_name}
          </td>
          <td>${project.task_list.size()}</td>
          <td>${project.project_member.size()}
          </td>
          <td>
              <a href="/Admin/プロジェクト削除処理?project_name=${project.project_name}">
                  <button type="button">削除</button>
              </a>

          </td>
      </tr>
      #{/list}
  </tbody>
</table>

-->

<br/>

<div id="利用者追加フォーム" style="text-align:center;">
    <form action='/Admin/userAdd' method='POST'>
        <input type='hidden' name='project_name' value='${project.project_name}' />
        <input type='text' name='user_id' value='' placeholder="ユーザーID" />
        <input type="submit" value="利用者追加" />
    </form>
</div> 

<!--

<div id="タスク作成フォーム" style="text-align: center;">
    <form action='/TaskManager/taskCreate' method='POST'> 
        <td><input type='hidden' name='project_name' value='${project_name}' /> </td>
        <td><input type='text' name='task_name' value='' placeholder="タスク名" /></td>
        <td></td>
        <td><input type="text" class="datepicker" name="deadline" placeholder="締め切り" /></td>
        <td></td>
        <td><input type="submit" value="タスク作成" /></td>
        <td></td>
    </form>
</div>

-->

<script type="text/javascript">
    $(function() {
        $(".user_remove").on("click", function() {
            $("#user_remove_modal").modal('show')
        });
    });
</script>